<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ATLAS</title>
    <link rel="stylesheet" href="libs/bootstrap-4.5.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/main.css">
</head>
<body>

<div class="container">
    <div class="jumbotron jumbotron-fluid text-center image-title">
        <div class="title-background"></div>
        <div class="title-background-overlay"></div>
        <div class="container title-content">
            <h1 class="display-1">ATLAS</h1>
            <p class="lead">Collision Avoidance Testing for Autonomous Vehicles with Global Map Modeling</p>
        </div>
    </div>

    <section class="container">
        <div class="row">
            <h2>MAP MODELING</h2>
        </div>
        <div class="row">
            <div class="col-sm">
                <img src="static/media/san_francisco_cut.png" alt="San Francisco Map" width="100%">
            </div>
            <div class="col-sm">
                <a href="https://content.lgsvlsimulator.com/maps/sanfrancisco/"><h5>San Francisco</h5></a>
                <p>The map contains 91 junctions, including:</p>
                <ul>
                    <li>88 signal-controlled junctions</li>
                    <li>3 stop-sign controlled junctions</li>
                </ul>
                <p>In 88 signal-controlled junctions, there are</p>
                <ul>
                    <li>819 junction lanes in total</li>
                    <li>721 junction lanes intersected by other junction lanes</li>
                </ul>
<!--                <p>We set all traffic lights to <span style="color: green">GREEN</span> to simulate uncontrolled junctions.</p>-->
                <p>From 721 junction lanes, <b><i>ATLAS</i></b> produces: </p>
                <ul>
                    <li>42 junction lane classes in total</li>
                    <li>17 junction lane classes selected for testing</li>
                </ul>
                <p>As a result, <b><i>ATLAS</i></b> run testing on 17 junction lanes (one lane per selected class).</p>
                <p>The details of junction lane classification are shown in table below.</p>
            </div>
        </div>
        <div class="row flex-row justify-content-center mt-3">
            <table class="table table-sm w-75">
                <caption class="text-center">17 Selected Junction Lane Classes</caption>
                <thead>
                <tr>
                    <th scope="col">Junction Lane Class</th>
                    <th scope="col">Intersection Vector</th>
                    <th scope="col">Number of Lanes</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th scope="row">JLG--654</th>
                    <td>2=>-4&emsp;2=>-3</td>
                    <td>29</td>
                </tr>
                <tr>
                    <th scope="row">JLG--660</th>
                    <td>4=>-2&emsp;4=>-3</td>
                    <td>27</td>
                </tr>
                <tr>
                    <th scope="row">JLG--672</th>
                    <td>6=>-2&emsp;6=>-4&emsp;3=>-5</td>
                    <td>51</td>
                </tr>
                <tr>
                    <th scope="row">JLG--675</th>
                    <td>2=>-6&emsp;2=>-5&emsp;2=>-3</td>
                    <td>16</td>
                </tr>
                <tr>
                    <th scope="row">JLG--678</th>
                    <td>6=>-2&emsp;3=>-5&emsp;3=>-4</td>
                    <td>19</td>
                </tr>
                <tr>
                    <th scope="row">JLG--682</th>
                    <td>5=>-2&emsp;4=>-2&emsp;5=>-3</td>
                    <td>17</td>
                </tr>
                <tr>
                    <th scope="row">JLG--684</th>
                    <td>2=>-6&emsp;2=>-5&emsp;4=>-6</td>
                    <td>32</td>
                </tr>
                <tr>
                    <th scope="row">JLG--737</th>
                    <td>4=>-2&emsp;3=>-6&emsp;3=>-5</td>
                    <td>5</td>
                </tr>
                <tr>
                    <th scope="row">JLG--739</th>
                    <td>4=>-2&emsp;6=>-3&emsp;4=>-5</td>
                    <td>4</td>
                </tr>
                <tr>
                    <th scope="row">JLG--742</th>
                    <td>5=>-3&emsp;2=>-6&emsp;2=>-4</td>
                    <td>1</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1062</th>
                    <td>4=>-3&emsp;2=>-3</td>
                    <td>4</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1066</th>
                    <td>2=>-4&emsp;3=>-4</td>
                    <td>4</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1067</th>
                    <td>4=>-2&emsp;3=>-2</td>
                    <td>4</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1132</th>
                    <td>3=>-2&emsp;3=>-4</td>
                    <td>6</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1430</th>
                    <td>5=>-2&emsp;3=>-6&emsp;7=>-2&emsp;3=>-8&emsp;7=>-4</td>
                    <td>12</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1431</th>
                    <td>5=>-2&emsp;3=>-6&emsp;7=>-2&emsp;3=>-8&emsp;3=>-4</td>
                    <td>12</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1432</th>
                    <td>5=>-8&emsp;7=>-2&emsp;3=>-8&emsp;7=>-4&emsp;3=>-6</td>
                    <td>12</td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>

    <section class="container">
        <div class="row">
            <h2>JUNCTION LANE TOPOLOGY DIAGRAMS</h2>
        </div>

        <div class="row flex-row justify-content-center">
            <div class="topology-diagram">
                <img src="static/media/junction_lane_diagrams/654.svg" class="card-img-top" alt="JLG--654 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--654</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/660.svg" class="card-img-top" alt="JLG--660 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--660</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/672.svg" class="card-img-top" alt="JLG--672 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--672</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/675.svg" class="card-img-top" alt="JLG--675 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--675</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/678.svg" class="card-img-top" alt="JLG--678 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--678</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/682.svg" class="card-img-top" alt="JLG--682 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--682</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/684.svg" class="card-img-top" alt="JLG--684 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--684</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/737.svg" class="card-img-top" alt="JLG--737 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--737</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/739.svg" class="card-img-top" alt="JLG--739 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--739</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/742.svg" class="card-img-top" alt="JLG--742 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--742</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1062.svg" class="card-img-top" alt="JLG--1062 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1062</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1066.svg" class="card-img-top" alt="JLG--1066 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1066</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1067.svg" class="card-img-top" alt="JLG--1067 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1067</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1132.svg" class="card-img-top" alt="JLG--1132 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1132</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1430.svg" class="card-img-top" alt="JLG--1430 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1430</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1431.svg" class="card-img-top" alt="JLG--1431 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1431</p>
                </div>
            </div>
            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1432.svg" class="card-img-top" alt="JLG--1432 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1432</p>
                </div>
            </div>
        </div>
    </section>

    <section class="container">
        <div class="row">
            <div class="col">
                <h2>ISSUES DISCOVERED</h2>
                <p>Note that when Apollo's bounding box (not 3D model) intersects with any obstacle's bounding box, a <b>collision</b> occurs.
                    <br>The bounding box is a bit larger than Apollo's 3D model showing in the video (i.e. Apollo's website-based human machine interface).
                    <br>As a result, <b>collision</b> may trigger even when there is gap between Apollo's 3D model and obstacle's bounding box.
                </p>
            </div>
        </div>
        <div class="media">
            <video id="wrong-yield-video" width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/1-wrong-yield-action-2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="modal fade" id="wrong-yield-modal" tabindex="-1" aria-labelledby="wrong-yield-modal-title" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="wrong-yield-modal-title">Influencing obstacle disabled</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <video class="w-100" controls >
                                <source src="static/media/issues_videos/1-wrong-yield-expected-motion.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    </div>
                </div>
            </div>
            <div class="media-body">
                <h5 class="mt-0">A. wrong yielding actions</h5>
                <p>
                    When the ego vehicle detects an NPC vehicle, Apollo decides to yield to it and results in a collision.
                    It  can  cross  the  junction  safely  by  keeping its current speed or overtaking.</p>
                <p><b>Video Description</b></p>
                <p>
                    At around <i class="ts" data-target="wrong-yield-video" data-value="16.8">16s</i>, the ego vehicle detects and decides to yield to an NPC vehicle even though
                    it can pass through the collision region very soon.
                    Hence, the ego vehicle first stops completely and then restarts its motion (<i class="ts" data-target="wrong-yield-video" data-value="19.8">19s</i>),
                    and eventually collides with the NPC vehicle (<i class="ts" data-target="wrong-yield-video" data-value="25">25s</i>).
                    <br>If we remove the NPC vehicle, the ego vehicle has the same motion before 16s,
                    but it can pass the collision region smoothly without stops (
                    <button type="button" class="btn btn-link p-0" data-toggle="modal" data-target="#wrong-yield-modal">
                    see video
                    </button>).
                </p>
            </div>
        </div>
        <div class="media">
            <video id="wrong-overtaking-video" width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/2-wrong-overtaking-2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">B. wrong overtaking</h5>
                <p>When the ego vehicle detects an NPC vehicle whose speed is slower,
                    Apollo decides to overtake the NPC vehicle and results in a collision.
                    It is safe if the ego vehicle yields to the NPC vehicle.</p>
                <p><b>Video description</b></p>
                <p>When the ego detects the NPC vehicle moving from the right, it selects to overtake (<i class="ts" data-target="wrong-overtaking-video" data-value="6">6s</i>).
                    At <i class="ts" data-target="wrong-overtaking-video" data-value="8.5">8s</i>,
                    the ego vehicle finds that it cannot pass through the NPC and decides to yield to it.
                    However, the current speed is 34 km/h, and the ego vehicle cannot stop itself,
                    resulting in a collision (<i class="ts" data-target="wrong-overtaking-video" data-value="9.2">9s</i>).
                    Since there is a long distance when the ego vehicle detects the NPC vehicle,
                    it could yield to the NPC vehicle if it slowed down its motion.</p>
            </div>
        </div>
        <div class="media">
            <video id="wrong-switch-video" width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/3-wrong-switch-from-yield-to-overtake-2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">C. wrong switch from yielding to overtaking</h5>
                <p>During the collision avoidance, the ego vehicle first yields to the NPC successfully.
                    However, Apollo starts to overtake before the NPC vehicle passes the collision region,
                    resulting in a collision.</p>
                <p><b>Video description</b></p>
                <p>The ego vehicle first yields to NPC vehicle 4 and stops completely (<i class="ts" data-target="wrong-switch-video" data-value="17">17s</i>).
                    Then, the ego vehicle restarts its motion to overtake quickly,
                    even though the NPC vehicle has not pass through the collision region yet (<i class="ts" data-target="wrong-switch-video" data-value="18">18s</i>).
                    Hence, a collision occurs (<i class="ts" data-target="wrong-switch-video" data-value="21.5">21s</i>).
                    In this case, since the ego vehicle has decided to yield to the NPC vehicle,
                    it should stop and wait until the NPC vehicle passes the collision region.</p>
            </div>
        </div>
        <div class="media">
            <video id="soft-braking-video" width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/4-emergency-braking-too-soft.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">D. emergency braking too soft</h5>
                <p>In some emergencies, for example, when an NPC cuts in,
                    and the ego vehicle cannot overtake since another NPC is ahead,
                    Apollo still generates a gentle brake, rather than emergency braking.
                    If Apollo took complete braking, the ego vehicle would stop before causing a collision.</p>
                <p><b>Video description</b></p>
                <p>The ego vehicle must brake immediately
                    when the NPC vehicles start their motion at around 3s (<i class="ts" data-target="soft-braking-video" data-value="3">3s</i>).
                    However, the vehicle brakes too softly capped at 50%
                    of the maximal braking force (<i class="ts" data-target="soft-braking-video" data-value="5.2">5s</i>).
                    Thus, a collision occurs (<i class="ts" data-target="soft-braking-video" data-value="7">7s</i>).
                    However, if the ego vehicle braked with the maximal braking force, it could avoid collisions.</p>
            </div>
        </div>
        <div class="media">
            <video id="coordination-video" width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/5-coordination.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="modal fade" id="coordination-modal" tabindex="-1" aria-labelledby="coordination-modal-title" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="coordination-modal-title">Influencing obstacle disabled</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <video class="w-100" controls>
                                <source src="static/media/issues_videos/5-coordination-one-obs-disabled.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    </div>
                </div>
            </div>
            <div class="media-body">
                <h5 class="mt-0">E. lack of coordinated collision avoidance</h5>
                <p>Apollo performs collision avoidance with each NPC vehicle independently,
                    so the ego vehicle may cause a deadlock with other vehicles or block the motion of other NPC vehicles. </p>
                <p><b>Video description</b></p>
                <p>First, the ego vehicle detects NPC 3 in front, slows down and follows it (the green wall) (<i class="ts" data-target="coordination-video" data-value="2.8">2s</i>).
                    Then, the ego vehicle detects NPC 2 crossing the junction and determines to
                    overtake by acceleration.
                    however, the ego vehicle finally slows down (<i class="ts" data-target="coordination-video" data-value="4.3">4s</i>) and
                    collides with NPC 2 (<i class="ts" data-target="coordination-video" data-value="5.5">5s</i>).
                    In this case, the ego vehicle can pass through the collision region by overtaking
                    without colliding with NPC 3 in front since NPC 3 passes
                    through the ego vehicle’s destination within the first 4 seconds.
                    An example of overtaking is shown in
                    <button type="button" class="btn btn-link p-0" data-toggle="modal" data-target="#coordination-modal">
                        this video
                    </button>.
                </p>
            </div>
        </div>
        <div class="media">
            <video id="conflicts-video" width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/6-decision-conflicts.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="modal fade" id="conflicts-modal" tabindex="-1" aria-labelledby="decision-conflicts-modal-title" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="decision-conflicts-modal-title">Destination moved further</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <video class="w-100" controls>
                                <source src="static/media/issues_videos/6-decision-conflicts-destination-far-away.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    </div>
                </div>
            </div>
            <div class="media-body">
                <h5 class="mt-0">F. decision conflicts</h5>
                <p>Apollo determines to slow down the ego vehicle to arrive at the destination or follow the vehicle ahead;
                    Meanwhile, Apollo needs to perform overtaking to avoid cut-in collisions.
                    In this case, the ego vehicle finally slows down its motion and causes a crash.
                </p>
                <p><b>Video Description</b></p>
                <p>In this video, when the ego vehicle is close to its destination, it should slow down;
                    However, the approaching NPC 5 triggers an overtaking action (<i class="ts" data-target="conflicts-video" data-value="8.8">8s</i>).
                    Finally, the ego vehicle decides to slow down (<i class="ts" data-target="conflicts-video" data-value="11.8">11s</i>)
                    and eventually collides with NPC 5 (<i class="ts" data-target="conflicts-video" data-value="13.4">13s</i>).
                    As safety is of paramount importance,
                    the ego vehicle is expected to overtake by acceleration to avoid collisions, as shown in
                    <button type="button" class="btn btn-link p-0" data-toggle="modal" data-target="#conflicts-modal">
                        this video
                    </button>.
                </p>
            </div>
        </div>
        <div class="media">
            <video id="prediction-video" width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/7-incorrect-prediction-2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">G. incorrect Prediction</h5>
                <p>Apollo sometimes cannot predict the motion of NPC vehicles accurately,
                    resulting in no sufficient distance to take safe actions.
                    For example, due to the short prediction duration or prediction of low-speed vehicles as static ones,
                    Apollo cannot detect collision in time, resulting in a short distance to take collision avoidance actions.
                </p>
                <p><b>Video description</b></p>
                <p>In this video, to avoid collisions with NCP vehicle 1 and 2,
                    the ego vehicle stops first (<i class="ts" data-target="prediction-video" data-value="20.2">20s</i>).
                    When these two vehicles have crossed,
                    the ego vehicle cannot predict the motion of vehicle 5 and re-starts its motion (<i class="ts" data-target="prediction-video" data-value="21">21s</i>),
                    resulting a collision (<i class="ts" data-target="prediction-video" data-value="23">23s</i>).
                    Clearly, in this case, the ego vehicle should keep waiting for NPC 5 to pass.</p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/8-obstacle-failure.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">H. obstacle Failure</h5>
                <p>the simulator cannot simulate NPC vehicles' motion after an accident.
                    When two NPC vehicles cause a collision, they may skid everywhere disorderly.
                    Hence, they may block, even collide with, the motion of the ego vehicle.
                    However, this should not be the responsibility of Apollo.</p>
                <p><b>Video description</b></p>
                <p>In the video, NPC 2 had an collision with another NPC in the junction after the test started.
                    This flipped the NPC 2's 3D model over to an upside down posture.
                    This made NPC 2 to skid recklessly and collide with the approaching Apollo.
                </p>
            </div>
        </div>
    </section>
</div>


<!--<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>-->
<script src="libs/bootstrap-4.5.3-dist/js/http_code.jquery.com_jquery-3.5.1.slim.js"></script>
<script src="libs/bootstrap-4.5.3-dist/js/http_cdn.jsdelivr.net_npm_popper.js@1.16.1_dist_umd_popper.js"></script>
<script src="libs/bootstrap-4.5.3-dist/js/bootstrap.bundle.min.js"></script>

<script src="static/js/index.js"></script>
</body>
</html>