<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ATLAS</title>
    <link rel="stylesheet" href="libs/bootstrap-4.5.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/main.css">
</head>
<body>

<div class="container">
    <div class="jumbotron jumbotron-fluid text-center image-title">
        <div class="title-background"></div>
        <div class="title-background-overlay"></div>
        <div class="container title-content">
            <h1 class="display-1">ATLAS</h1>
            <p class="lead">Collision Avoidance Testing for Autonomous Vehicles with Global Map Modeling</p>
        </div>
    </div>

    <section class="container">
        <div class="row">
            <h2>MAP MODELING</h2>
        </div>
        <div class="row">
            <div class="col-sm">
                <img src="static/media/san_francisco_cut.png" alt="San Francisco Map" width="100%">
            </div>
            <div class="col-sm">
                <a href="https://content.lgsvlsimulator.com/maps/sanfrancisco/"><h5>San Francisco</h5></a>
                <p>The map contains 91 junctions, including:</p>
                <ul>
                    <li>88 signal-controlled junctions</li>
                    <li>3 stop-sign controlled junctions</li>
                </ul>
                <p>In 88 signal-controlled junctions, there are</p>
                <ul>
                    <li>819 junction lanes in total</li>
                    <li>721 junction lanes intersected by other junction lanes</li>
                </ul>
<!--                <p>We set all traffic lights to <span style="color: green">GREEN</span> to simulate uncontrolled junctions.</p>-->
                <p>From 721 junction lanes, <b><i>ATLAS</i></b> produces: </p>
                <ul>
                    <li>42 junction lane classes in total</li>
                    <li>17 junction lane classes selected for testing</li>
                </ul>
                <p>As a result, <b><i>ATLAS</i></b> run testing on 17 junction lanes (one lane per selected class).</p>
                <p>The details of junction lane classification are shown in table below.</p>
            </div>
        </div>
        <div class="row flex-row justify-content-center mt-3">
            <table class="table table-sm w-75">
                <caption class="text-center">17 Selected Junction Lane Classes</caption>
                <thead>
                <tr>
                    <th scope="col">Junction Lane Class</th>
                    <th scope="col">Intersection Vector</th>
                    <th scope="col">Number of Lanes</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th scope="row">JLG--654</th>
                    <td>2=>-4&emsp;2=>-3</td>
                    <td>29</td>
                </tr>
                <tr>
                    <th scope="row">JLG--660</th>
                    <td>4=>-2&emsp;4=>-3</td>
                    <td>27</td>
                </tr>
                <tr>
                    <th scope="row">JLG--672</th>
                    <td>6=>-2&emsp;6=>-4&emsp;3=>-5</td>
                    <td>51</td>
                </tr>
                <tr>
                    <th scope="row">JLG--675</th>
                    <td>2=>-6&emsp;2=>-5&emsp;2=>-3</td>
                    <td>16</td>
                </tr>
                <tr>
                    <th scope="row">JLG--678</th>
                    <td>6=>-2&emsp;3=>-5&emsp;3=>-4</td>
                    <td>19</td>
                </tr>
                <tr>
                    <th scope="row">JLG--682</th>
                    <td>5=>-2&emsp;4=>-2&emsp;5=>-3</td>
                    <td>17</td>
                </tr>
                <tr>
                    <th scope="row">JLG--684</th>
                    <td>2=>-6&emsp;2=>-5&emsp;4=>-6</td>
                    <td>32</td>
                </tr>
                <tr>
                    <th scope="row">JLG--737</th>
                    <td>4=>-2&emsp;3=>-6&emsp;3=>-5</td>
                    <td>5</td>
                </tr>
                <tr>
                    <th scope="row">JLG--739</th>
                    <td>4=>-2&emsp;6=>-3&emsp;4=>-5</td>
                    <td>4</td>
                </tr>
                <tr>
                    <th scope="row">JLG--742</th>
                    <td>5=>-3&emsp;2=>-6&emsp;2=>-4</td>
                    <td>1</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1062</th>
                    <td>4=>-3&emsp;2=>-3</td>
                    <td>4</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1066</th>
                    <td>2=>-4&emsp;3=>-4</td>
                    <td>4</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1067</th>
                    <td>4=>-2&emsp;3=>-2</td>
                    <td>4</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1132</th>
                    <td>3=>-2&emsp;3=>-4</td>
                    <td>6</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1430</th>
                    <td>5=>-2&emsp;3=>-6&emsp;7=>-2&emsp;3=>-8&emsp;7=>-4</td>
                    <td>12</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1431</th>
                    <td>5=>-2&emsp;3=>-6&emsp;7=>-2&emsp;3=>-8&emsp;3=>-4</td>
                    <td>12</td>
                </tr>
                <tr>
                    <th scope="row">JLG--1432</th>
                    <td>5=>-8&emsp;7=>-2&emsp;3=>-8&emsp;7=>-4&emsp;3=>-6</td>
                    <td>12</td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>

    <section class="container">
        <div class="row">
            <h2>JUNCTION LANE TOPOLOGY DIAGRAMS</h2>
        </div>

        <div class="row flex-row justify-content-center">
            <div class="topology-diagram">
                <img src="static/media/junction_lane_diagrams/654.svg" class="card-img-top" alt="JLG--654 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--654</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/660.svg" class="card-img-top" alt="JLG--660 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--660</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/672.svg" class="card-img-top" alt="JLG--672 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--672</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/675.svg" class="card-img-top" alt="JLG--675 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--675</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/678.svg" class="card-img-top" alt="JLG--678 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--678</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/682.svg" class="card-img-top" alt="JLG--682 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--682</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/684.svg" class="card-img-top" alt="JLG--684 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--684</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/737.svg" class="card-img-top" alt="JLG--737 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--737</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/739.svg" class="card-img-top" alt="JLG--739 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--739</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/742.svg" class="card-img-top" alt="JLG--742 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--742</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1062.svg" class="card-img-top" alt="JLG--1062 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1062</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1066.svg" class="card-img-top" alt="JLG--1066 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1066</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1067.svg" class="card-img-top" alt="JLG--1067 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1067</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1132.svg" class="card-img-top" alt="JLG--1132 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1132</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1430.svg" class="card-img-top" alt="JLG--1430 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1430</p>
                </div>
            </div>

            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1431.svg" class="card-img-top" alt="JLG--1431 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1431</p>
                </div>
            </div>
            <div class="topology-diagram" >
                <img src="static/media/junction_lane_diagrams/1432.svg" class="card-img-top" alt="JLG--1432 SVG diagram">
                <div class="card-body">
                    <p class="card-text text-center">JLG--1432</p>
                </div>
            </div>
        </div>
    </section>

    <section class="container">
        <div class="row">
            <div class="col">
                <h2>ISSUES DISCOVERED</h2>
                <p>Note that when Apollo's bounding box (not 3D model) intersects with any obstacle's bounding box, a <b>collision</b> occurs.
                    <br>The bounding box is a bit larger than Apollo's 3D model showing in the video (i.e. Apollo's website-based human machine interface).
                    <br>As a result, <b>collision</b> may trigger even when there is gap between Apollo's 3D model and obstacle's bounding box.
                </p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/1-wrong-yield-action-2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="modal fade" id="wrong-yield-modal" tabindex="-1" aria-labelledby="wrong-yield-modal-title" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="wrong-yield-modal-title">Influencing obstacle disabled</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <video class="w-100" controls>
                                <source src="static/media/issues_videos/1-wrong-yield-expected-motion.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    </div>
                </div>
            </div>
            <div class="media-body">
                <h5 class="mt-0">Wrong yielding actions</h5>
                <p>When the ego vehicle detects an NPC vehicle, Apollo decides to yield to it and results in a collision.
                    It  can  cross  the  junction  safely  by  keeping its current speed or overtaking.</p>
                <p>In the video, Apollo could have completed the turning smoothly by maintaining its speed.
                However, it performed an yield when it saw obstacle 5 approaching. This leads to a collision eventually.</p>
                <p>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#wrong-yield-modal">
                        Click Me
                    </button> to view the turning without obstacle 5.
                </p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/2-wrong-overtaking-2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">Wrong overtaking</h5>
                <p>When the ego vehicle detects an NPC vehicle whose speed is slower,
                    Apollo decides to overtake the NPC vehicle and results in a collision.
                    It is safe if the ego vehicle yields to the NPC vehicle.</p>
                <p>In the video, Apollo should have yield to the obstacle 1 crossing from left to avoid the collision.</p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/3-wrong-switch-from-yield-to-overtake-2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">Wrong switch from yielding to overtaking</h5>
                <p>During the collision avoidance, the ego vehicle first yields to the NPC successfully.
                    However, Apollo starts to overtake before the NPC vehicle passes the collision region,
                    resulting in a collision.</p>
                <p>In the video, Apollo first yielded to obstacle 4;
                    However, it switched to the "<b>overtake</b>" decision and accelerated, which led to collision eventually.</p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/4-emergency-braking-too-soft.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">Emergency braking too soft</h5>
                <p>In some emergencies, for example, when an NPC cuts in,
                    and the ego vehicle cannot overtake since another NPC is ahead,
                    Apollo still generates a gentle brake, rather than emergency braking.
                    If Apollo took complete braking, the ego vehicle would stop before causing a collision.</p>
                <p>In the video, Apollo started to brake upon seeing the traffic moves.
                    If it braked with full braking power, i.e. 100%, it could have stopped at 5 seconds' location (where its planned trajectory ended)
                    ,without blocking obstacle 2's path.
                However, the braking power reached a maximum of only 50% (see top right corner) at about 4 seconds.
                This resulted in Apollo rushing into the traffic flow and collided with obstacle 2.</p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/5-coordination.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="modal fade" id="coordination-modal" tabindex="-1" aria-labelledby="coordination-modal-title" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="coordination-modal-title">Influencing obstacle disabled</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <video class="w-100" controls>
                                <source src="static/media/issues_videos/5-coordination-one-obs-disabled.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    </div>
                </div>
            </div>
            <div class="media-body">
                <h5 class="mt-0">Lack of coordinated collision avoidance</h5>
                <p>Apollo performs collision avoidance with each NPC vehicle independently,
                    so the ego vehicle may cause a deadlock with other vehicles or block the motion of other NPC vehicles. </p>
                <p>In the video at 2 seconds, the decision was "<b>overtake</b>" for obstacle 2 (which makes Apollo accelerate)
                    and "<b>follow behind</b>" for obstacle 3 (which makes Apollo decelerate).
                    This made Apollo irresolute whose control output switched between accelerating and braking from 2 seconds to 4 seconds,
                    and eventually Apollo drove into obstacle 2's path and collided with it.</p>
                <p>If Apollo has coordinated or fused decisions across multiple obstacles, it could have made the "<b>yield</b>" decision to obstacle 2,
                    considering the obstacle 3 was in front, and the collision could have been avoided.</p>
                <p>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#coordination-modal">
                        Click Me
                    </button> to view with one obstacle disabled.
                </p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/6-decision-conflicts.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="modal fade" id="decision-conflicts-modal" tabindex="-1" aria-labelledby="decision-conflicts-modal-title" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="decision-conflicts-modal-title">Destination moved further</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <video class="w-100" controls>
                                <source src="static/media/issues_videos/6-decision-conflicts-destination-far-away.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    </div>
                </div>
            </div>
            <div class="media-body">
                <h5 class="mt-0">Decision conflicts</h5>
                <p>Apollo determines to slow down the ego vehicle to arrive at the destination or follow the vehicle ahead;
                    Meanwhile, Apollo needs to perform overtaking to avoid cut-in collisions.
                    In this case, the ego vehicle finally slows down its motion and causes a crash.
                </p>
                <p>In the video, Apollo needed to brake to not overshot the destination location;
                    while it needs to accelerate to "<b>overtake</b>" obstacle 5.
                    This decision conflicts resulted in Apollo switching between accelerating and braking from around 8 seconds to 13 seconds,
                    and the eventual collision with obstacle 5.</p>
                <p>Note that this issue is considered at a higher level than the issue above ("lack of coordinated collision avoidance"),
                    because this issue is caused by inter-task conflicts (task "avoid collisions" and task "reach the destination"),
                    while the issue above is intra-task conflicts (task "avoid collisions" only).</p>
                <p>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#decision-conflicts-modal">
                        Click Me
                    </button> to view with destination moved further away.
                </p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/7-incorrect-prediction-2.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">Incorrect Prediction</h5>
                <p>Apollo sometimes cannot predict the motion of NPC vehicles accurately,
                    resulting in no sufficient distance to take safe actions.
                    For example, due to the short prediction duration or prediction of low-speed vehicles as static ones,
                    Apollo cannot detect collision in time, resulting in a short distance to take collision avoidance actions.
                </p>
                <p>In the video, Apollo stopped to yield to obstacle 1 and obstacle 2.
                    After they both crossed over and obstacle 5 approached,
                    Apollo's prediction module failed to produce an prediction trajectory for obstacle 5,
                    making Apollo's planning module believe that its path in front is clear.
                    As a result, Apollo started to move forward and soon collided with obstacle 5.
                </p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-center mr-3">
                <source src="static/media/issues_videos/8-obstacle-failure.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">Obstacle Failure</h5>
                <p>the simulator cannot simulate NPC vehicles' motion after an accident.
                    When two NPC vehicles cause a collision, they may skid everywhere disorderly.
                    Hence, they may block, even collide with, the motion of the ego vehicle.
                    However, this should not be the responsibility of Apollo.</p>
                <p>In the video, obstacle 2 had an collision with another obstacle in the junction after the test started.
                    This flipped the obstacle 2's 3D model over to an upside down posture.
                    This made obstacle 2 to skid recklessly and collide with the approaching Apollo.s
                </p>
            </div>
        </div>
    </section>
</div>


<!--<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>-->
<script src="libs/bootstrap-4.5.3-dist/js/http_code.jquery.com_jquery-3.5.1.slim.js"></script>
<script src="libs/bootstrap-4.5.3-dist/js/http_cdn.jsdelivr.net_npm_popper.js@1.16.1_dist_umd_popper.js"></script>
<script src="libs/bootstrap-4.5.3-dist/js/bootstrap.bundle.min.js"></script>

<script src="static/js/index.js"></script>
</body>
</html>